<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="preload" href="https://cdn.jsdelivr.net/npm/boxicons@2.0.5/fonts/boxicons.woff2" as="font" type="font/woff2" crossorigin>
<link href="https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css" rel="stylesheet">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>NSCDC / Civil Defence Practice Quiz</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJ+Y3m7o2s8hZ+6Q5f5Q5f5Q5f5Q5f5Q5f5Q=" crossorigin="anonymous"></script>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f7f7f8;color:#222;margin:0;padding:1rem}
    .container{max-width:900px;margin:0 auto;background:#fff;padding:1.25rem;border-radius:8px;box-shadow:0 6px 30px rgba(0,0,0,0.06)}
    h1{margin:0 0 0.75rem;color:#e74c3c}
    #timer{font-weight:700;color:#333;margin-bottom:1rem}
    .question{padding:1rem;border-radius:8px;border:1px solid #eee;margin-bottom:1rem}
    .choices label{display:block;margin:0.4rem 0;padding:0.5rem;border-radius:6px;cursor:pointer}
    .choices input{margin-right:0.6rem}
    .nav-buttons{display:flex;gap:0.5rem;justify-content:center;margin-top:1rem}
    button{background:#ff9800;color:#fff;border:none;padding:0.6rem 1rem;border-radius:6px;cursor:pointer;font-weight:700}
    button[disabled]{opacity:0.5;cursor:not-allowed}
    .small{font-size:0.9rem;color:#666}
    #preview-area, #result-area{margin-top:1rem;padding:1rem;border-radius:8px;background:#f4f4f6}
    .hidden{display:none}
    .pdf-link{display:inline-block;margin-bottom:1rem;color:#0077cc}
  </style>
</head>
<body>
  <div class="container">
    <h1>NSCDC / Civil Defence Practice Quiz</h1>
    <p class="small">Practice the past questions and added general knowledge + maths and language items. Each page shows 4 questions. Use Next/Previous to navigate. Timer: <span id="timer">01:00:00</span></p>

    <a class="pdf-link" href="CIVIL-DEFENCE-NSCDC-RECRUITMENT-EXAM-PAST-QUESTIONS-AND-ANSWERS.pdf" target="_blank">Open past questions PDF (download)</a>

    <div id="questions-area"></div>

    <div class="nav-buttons">
      <button id="prevBtn">Previous</button>
      <button id="nextBtn">Next</button>
    </div>

    <div id="preview-area" class="hidden"></div>
    <div id="result-area" class="hidden"></div>
  </div>

<script>
// Questions array (20 questions). Each question has id, text, choices, answer index
const QUESTIONS = [
  {id: 'q1', text: 'What is the capital of Lagos State?', choices: ['Ikeja','Lagos Island','Epe','Badagry'], answer:0},
  {id: 'q2', text: 'What is the capital of Kano State?', choices: ['Wudil','Kano','Gaya','Dala'], answer:1},
  {id: 'q3', text: 'What is the capital of Rivers State?', choices: ['Bonny','Port Harcourt','Opobo','Ahoada'], answer:1},
  {id: 'q4', text: 'What is the capital of Kaduna State?', choices: ['Zaria','Kafanchan','Kaduna','Kachia'], answer:2},

  {id: 'q5', text: 'The phrase "kick the bucket" means:', choices: ['To die','To go on holiday','To fail an exam','To celebrate'], answer:0},
  {id: 'q6', text: 'The phrase "spill the beans" means:', choices: ['To cook food','To reveal a secret','To make a mess','To gossip politely'], answer:1},
  {id: 'q7', text: 'The phrase "break the ice" means:', choices: ['To throw an object','To start a conversation and ease tension','To separate ice from water','To finish quickly'], answer:1},
  {id: 'q8', text: 'Which phrase means to stop worrying and relax?', choices: ['Hit the sack','Let your hair down','Break the bank','Hold your horses'], answer:1},

  {id: 'q9', text: 'Calculate: 200 ÷ 20 = ?', choices: ['5','10','20','100'], answer:1},
  {id: 'q10', text: 'Calculate: 254 × 30 = ?', choices: ['7,620','6,720','8,120','7,020'], answer:0},
  {id: 'q11', text: 'If a training starts at 09:00 and lasts 3 hours 30 minutes, when does it end?', choices: ['12:00','12:30','13:00','12:45'], answer:1},
  {id: 'q12', text: 'A candidate scored 78, 82, 69, and 71 in four tests. What is the average?', choices: ['75','75.0','75.0 (75)','80'], answer:2},

  {id: 'q13', text: 'Which is not a primary colour?', choices: ['Red','Green','Blue','Yellow'], answer:3},
  {id: 'q14', text: 'What does NSCDC stand for?', choices: ['Nigerian Security and Civil Defence Corps','National Safety & Civil Development Council','Niger State Civil Defence Corps','National Security and Criminal Defence Council'], answer:0},
  {id: 'q15', text: 'Which of the following is a duty of Civil Defence?', choices: ['Emergency response and rescue','Issuing passports','Currency printing','Space exploration'], answer:0},
  {id: 'q16', text: 'Choose the correct plural: "Child" → ?', choices: ['Childs','Children','Childes','Childrens'], answer:1},

  {id: 'q17', text: 'If train A leaves at 08:00 and arrives at 10:30, travel time is?', choices: ['2 hours','2 hours 30 minutes','3 hours','1 hour 30 minutes'], answer:1},
  {id: 'q18', text: 'Which number is prime?', choices: ['21','27','29','33'], answer:2},
  {id: 'q19', text: 'A rope 120m long is cut into 4 equal parts. Length of each part?', choices: ['20m','30m','40m','50m'], answer:2},
  {id: 'q20', text: 'Which is the Federal Capital Territory (FCT)?', choices: ['Lagos','Abuja','Port Harcourt','Kano'], answer:1}
];

const QUESTIONS_PER_PAGE = 4;
const TOTAL_PAGES = Math.ceil(QUESTIONS.length / QUESTIONS_PER_PAGE);
let currentPage = 1;
let answers = {}; // store selected choice index per question id

// Timer: 1 hour in seconds
let remaining = 60 * 60; // 3600 seconds
let timerInterval = null;

function formatTime(sec){
  const h = Math.floor(sec/3600).toString().padStart(2,'0');
  const m = Math.floor((sec%3600)/60).toString().padStart(2,'0');
  const s = Math.floor(sec%60).toString().padStart(2,'0');
  return `${h}:${m}:${s}`;
}

function startTimer(){
  $('#timer').text(formatTime(remaining));
  timerInterval = setInterval(()=>{
    remaining--;
    $('#timer').text(formatTime(remaining));
    if(remaining <= 0){
      clearInterval(timerInterval);
      submitQuiz();
    }
  },1000);
}

function renderPage(page){
  currentPage = page;
  const start = (page-1) * QUESTIONS_PER_PAGE;
  const pageQuestions = QUESTIONS.slice(start, start + QUESTIONS_PER_PAGE);
  const $area = $('#questions-area').empty();
  pageQuestions.forEach(q => {
    const $q = $(`<div class="question" id="${q.id}"><strong>${q.text}</strong></div>`);
    const $choices = $('<div class="choices"></div>');
    q.choices.forEach((c, idx) => {
      const checked = answers[q.id] === idx ? 'checked' : '';
      const $lab = $(` <label><input type="radio" name="${q.id}" value="${idx}" ${checked}> ${c}</label>`);
      $choices.append($lab);
    });
    $q.append($choices);
    $area.append($q);
  });

  // Update nav button states and label
  $('#prevBtn').prop('disabled', page === 1);
  if(page === TOTAL_PAGES){
    $('#nextBtn').text('Submit');
  } else {
    $('#nextBtn').text('Next');
  }
}

function collectAnswersFromPage(){
  // Save selected answers on visible page
  $('#questions-area .question').each(function(){
    const qid = $(this).attr('id');
    const val = $(this).find('input[type=radio]:checked').val();
    if(typeof val !== 'undefined') answers[qid] = parseInt(val);
  });
}

function showPreview(){
  collectAnswersFromPage();
  const $p = $('#preview-area').empty().removeClass('hidden');
  $p.append('<h3>Preview Answers</h3>');
  QUESTIONS.forEach(q => {
    const sel = (answers[q.id] != null) ? q.choices[answers[q.id]] : '<em>Not answered</em>';
    const correct = q.choices[q.answer];
    const ok = (answers[q.id] === q.answer) ? '✅' : '❌';
    $p.append(`<div class="small"><strong>${q.text}</strong><br> Your answer: ${sel} | Correct: ${correct} ${ok}</div><hr>`);
  });
  $('html,body').animate({scrollTop: $p.offset().top - 20},300);
}

function submitQuiz(auto=false){
  collectAnswersFromPage();
  clearInterval(timerInterval);
  let correctCount = 0;
  QUESTIONS.forEach(q => {
    if(answers[q.id] === q.answer) correctCount++;
  });
  const percent = Math.round((correctCount / QUESTIONS.length) * 100);
  const $r = $('#result-area').removeClass('hidden').empty();
  $r.append(`<h3>Result</h3>`);
  $r.append(`<p class="small">Score: ${correctCount} / ${QUESTIONS.length} (${percent}%)</p>`);
  if(auto) $r.append('<p class="small">Time has elapsed; your quiz was submitted automatically.</p>');
  $r.append('<button id="reviewBtn">Review Answers</button>');
  $('html,body').animate({scrollTop: $r.offset().top - 20},300);

  $('#reviewBtn').on('click', function(){
    showPreview();
  });
}

$(function(){
  // initial render
  renderPage(1);
  startTimer();

  // click handlers
  $('#nextBtn').on('click', function(){
    collectAnswersFromPage();
    if(currentPage < TOTAL_PAGES){
      renderPage(currentPage + 1);
    } else {
      // last page -> submit
      submitQuiz();
    }
  });

  $('#prevBtn').on('click', function(){
    collectAnswersFromPage();
    if(currentPage > 1){
      renderPage(currentPage - 1);
    }
  });

  // Show preview when on last page and user wants to preview
  // We'll add a keyboard shortcut P for preview
  $(document).on('keydown', function(e){
    if(e.key === 'p' || e.key === 'P') showPreview();
  });

  // Add dynamic Preview and Submit buttons to appear when on last page
  // We'll observe page render via a small interval check
  const observer = setInterval(()=>{
    if(currentPage === TOTAL_PAGES){
      if(!$('#previewBtn').length){
        const $prev = $('<button id="previewBtn" style="background:#0077cc">Preview</button>');
        $('.nav-buttons').append($prev);
        $prev.on('click', showPreview);
      }
    } else {
      $('#previewBtn').remove();
      $('#result-area').addClass('hidden');
      $('#preview-area').addClass('hidden');
    }
  },300);
});
</script>
</body>
</html>