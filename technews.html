<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2106993337225854"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="preload" href="https://cdn.jsdelivr.net/npm/boxicons@2.0.5/fonts/boxicons.woff2" as="font" type="font/woff2" crossorigin>
<link href="https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/custom.css">
    <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>
    <title>Tech News | Aidoko Emmanuel</title>
</head>
<body>
    <header class="l-header">
        <nav class="nav bd-grid">
            <div>
                <a href="index.html" class="nav__logo">Aidoko Emmanuel</a>
            </div>
            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item"><a href="index.html" class="nav__link">Home</a></li>
                    <!-- <li class="nav__item"><a href="about.html" class="nav__link">About</a></li> -->
                    <li class="nav__item"><a href="technews.html" class="nav__link active">Tech News</a></li>
                    <li class="nav__item"><a href="sportnews.html" class="nav__link">Sports</a></li>
                    <li class="nav__item"><a href="entnews.html" class="nav__link">Entertainment</a></li>
                    <li class="nav__item"><a href="civildef_exam.html" class="nav__link">CDCFIB EXAMS</a></li>
               
                </ul>
            </div>
            <div class="nav__toggle" id="nav-toggle">
                <i class='bx bx-menu'></i>
            </div>
        </nav>
    </header>
    <main class="l-main">
        <section class="section" id="tech-news-section">
            <h2 class="section-title">Latest Tech News</h2>
            <div id="news-list" class="bd-grid" style="display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;"></div>
        </section>
    </main>
    <footer class="footer section">
        <div class="footer__container bd-grid">
            <div class="footer__data">
                <h2 class="footer__title">Aidoko Emmanuel</h2>
                <p class="footer__text">I'm Aidoko Emmanuel and this is my personal website</p>
            </div>
            <div class="footer__data">
                <h2 class="footer__title">EXPLORE</h2>
                <ul>
                    <li><a href="index.html" class="footer__link">Home</a></li>
                    <li><a href="about.html" class="footer__link">About</a></li>
                    <li><a href="technews.html" class="footer__link">Tech News</a></li>
                    <li><a href="sportnews.html" class="footer__link">Sports</a></li>
                    <li><a href="entnews.html" class="footer__link">Entertainment</a></li>
                </ul>
            </div>
            <div class="footer__data">
                <h2 class="footer__title">FOLLOW</h2>
                <a href="https://www.facebook.com/terryems" class="footer__social" title="Facebook"><i class='bx bxl-facebook'></i></a>
                <a href="https://www.github.com/terryems" class="footer__social" title="GitHub"><i class='bx bxl-github'></i></a>
                <a href="https://www.linkedin.com/in/terryems" class="footer__social" title="LinkedIn"><i class='bx bxl-linkedin'></i></a>
            </div>
            <div style="min-width:180px">
                <!-- manual ad unit -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-2106993337225854"
                     data-ad-slot="9996782272"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </div>
    </footer>
    <script>
    const API_KEY = '65223cc46bdb4c50a35fb13efcec3c70';
    
    async function saveToNewsJson(newsItem) {
        try {
            // Get existing news
            const response = await fetch('news.json');
            const existingNews = await response.json();
            
            // Check if article already exists (avoid duplicates)
            const exists = existingNews.find(item => item.title === newsItem.title);
            if (!exists) {
                // Add new article to the beginning
                existingNews.unshift(newsItem);
                
                // Keep only latest 50 articles to prevent file from getting too large
                const updatedNews = existingNews.slice(0, 50);
                
                // Save to localStorage for now (since we can't write files from browser)
                localStorage.setItem('additionalNews', JSON.stringify(updatedNews));
            }
        } catch (error) {
            console.error('Error saving to news.json:', error);
        }
    }
    
    async function loadTechNews() {
        const newsList = document.getElementById('news-list');
        newsList.innerHTML = '<div style="text-align:center;padding:2rem;color:#666;">Loading tech news...</div>';
        
        try {
            // Load local tech news first
            const localResponse = await fetch('news.json');
            const localNews = await localResponse.json();
            const localTech = localNews.filter(item => item.category === 'tech');
            
            // Get tech news from BBC
            const bbcUrl = `https://newsapi.org/v2/top-headlines?sources=bbc-news&category=technology&pageSize=3&apiKey=${API_KEY}`;
            
            // Get general tech news 
            const techUrl = `https://newsapi.org/v2/everything?q=technology OR programming OR AI OR software&language=en&sortBy=publishedAt&pageSize=4&apiKey=${API_KEY}`;
            
            // Get CNN tech news
            const cnnUrl = `https://newsapi.org/v2/everything?sources=cnn&q=technology&pageSize=3&apiKey=${API_KEY}`;
            
            const [bbcResponse, techResponse, cnnResponse] = await Promise.all([
                fetch(bbcUrl),
                fetch(techUrl),
                fetch(cnnUrl)
            ]);
            
            const [bbcData, techData, cnnData] = await Promise.all([
                bbcResponse.json(),
                techResponse.json(),
                cnnResponse.json()
            ]);
            
            let allNews = [...localTech];
            
            // Add BBC tech news
            if (bbcData.status === 'ok' && bbcData.articles) {
                bbcData.articles.forEach((article, index) => {
                    allNews.push({
                        id: `bbc-tech-${index}`,
                        title: article.title,
                        image: article.urlToImage || 'assets/img/tech-default.jpg',
                        summary: article.description || 'BBC Technology News',
                        url: article.url,
                        date: new Date(article.publishedAt).toLocaleDateString(),
                        source: 'BBC News'
                    });
                });
            }
            
            // Add general tech news
            if (techData.status === 'ok' && techData.articles) {
                techData.articles.forEach((article, index) => {
                    const newsItem = {
                        id: `tech-${Date.now()}-${index}`,
                        title: article.title,
                        image: article.urlToImage || 'assets/img/tech-default.jpg',
                        summary: article.description || 'Latest Technology News',
                        content: `${article.content || article.description || 'Full article content not available.'}<br><br><strong>Source:</strong> ${article.source.name}<br><strong>Original URL:</strong> <a href="${article.url}" target="_blank" style="color:#ff9800;">${article.url}</a>`,
                        date: new Date(article.publishedAt).toLocaleDateString(),
                        category: 'technology',
                        source: article.source.name
                    };
                    allNews.push(newsItem);
                    // Save to news.json
                    saveToNewsJson(newsItem);
                });
            }
            
            // Add CNN tech news
            if (cnnData.status === 'ok' && cnnData.articles) {
                cnnData.articles.forEach((article, index) => {
                    allNews.push({
                        id: `cnn-tech-${index}`,
                        title: article.title,
                        image: article.urlToImage || 'assets/img/tech-default.jpg',
                        summary: article.description || 'CNN Technology News',
                        url: article.url,
                        date: new Date(article.publishedAt).toLocaleDateString(),
                        source: 'CNN'
                    });
                });
            }
            
            // Remove duplicates and sort by date
            const uniqueNews = allNews.filter((item, index, self) => 
                index === self.findIndex(t => t.title === item.title)
            );
            
            if (uniqueNews.length === 0) {
                newsList.innerHTML = '<p style="text-align:center;color:#666;">No tech news available yet.</p>';
                return;
            }
            
            newsList.innerHTML = uniqueNews.slice(0, 10).map(item => `
                <div class="news-card" style="background:#fff;border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,0.08);padding:1.5rem;margin-bottom:2rem;display:flex;flex-direction:column;align-items:center;max-width:400px;">
                    <img src="${item.image}" alt="${item.title}" style="width:100%;max-width:320px;height:200px;object-fit:cover;border-radius:12px;margin-bottom:1rem;" onerror="this.src='assets/img/tech-default.jpg'">
                    <h3 style="color:#fc575e;margin-bottom:0.5rem;font-size:1.1rem;text-align:center;">${item.title}</h3>
                    <p style="margin-bottom:1rem;text-align:center;color:#666;font-size:0.9rem;">${(item.summary || '').substring(0, 120)}...</p>
                    <small style="color:#999;margin-bottom:0.5rem;">Source: ${item.source || 'Tech News'}</small>
                    <a href="read.html?id=${item.id}" class="news-read-link" style="background:#ff9800;color:#fff;padding:8px 18px;border-radius:8px;font-weight:bold;text-decoration:none;margin-top:auto;">Read More</a>
                </div>
            `).join('');
            
        } catch (error) {
            console.error('Error loading tech news:', error);
            newsList.innerHTML = '<p style="text-align:center;color:#f44;">Error loading tech news. Please try again later.</p>';
        }
    }
    
    fetch('news.json')
      .then(response => response.json())
      .then(news => {
        // Filter news by category 'technology'
        const techNews = news.filter(item => item.category === 'technology');
        const newsList = document.getElementById('news-list');
        if (techNews.length === 0) {
          newsList.innerHTML = '<p style="text-align:center;color:#666;">No tech news available yet.</p>';
        } else {
          newsList.innerHTML = techNews.map(item => `
            <div class="news-card" style="background:#fff;border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,0.08);padding:1.5rem;margin-bottom:2rem;display:flex;flex-direction:column;align-items:center;max-width:400px;">
              <img src="${item.image}" alt="${item.title}" style="width:100%;max-width:320px;border-radius:12px;margin-bottom:1rem;">
              <h3 style="color:#fc575e;margin-bottom:0.5rem;">${item.title}</h3>
              <p style="margin-bottom:1rem;">${item.summary}</p>
              <a href="read.html?id=${item.id}" class="news-read-link" style="background:#ff9800;color:#fff;padding:8px 18px;border-radius:8px;font-weight:bold;text-decoration:none;">Read More</a>
            </div>
          `).join('');
        }
      })
      .catch(error => {
        console.error('Error loading news:', error);
        document.getElementById('news-list').innerHTML = '<p style="text-align:center;color:#666;">Error loading tech news.</p>';
      });
    </script>
</body>
</html>